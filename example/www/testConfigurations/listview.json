{
  "Name": "ListView",
  "Namespace": "Views.ReceiptTracking",
  "Text": "Мониторинг статусов обработки квитанций",
  "DataSources": [
    {
      "DocumentDataSource": {
        "Name": "ReceiptTrackingDataSource",
        "ConfigId": "ReformaGkh",
        "DocumentId": "ReceiptTracking",
        "PageSize": 50,
        "NeedTotalCount": true
      }
    },
    {
      "ObjectDataSource": {
        "Name": "FilterDataSource",
        "Items": [
          {
            "Property": "regex(full_address.street_formal_name,'^{0}',IgnoreCase)"
          },
          {
            "Property": "eq(house_profile_data.area_total,{0})"
          },
          {
            "Property": "gte(house_profile_data.management_contract.date_start,{0})"
          },
          {
            "Property": "lt(house_profile_data.management_contract.date_start,{0})"
          },
          {
            "Property": "in(inn,{0})"
          },
          {
            "Property": "eq(full_address.house_number,'{0}')"
          },
          {
            "Property": "eq(ReadyToPublication,{0})"
          },
          {
            "Property": "eq(PublicationStatus,{0})"
          },
          {
            "Property": "exists(ManagementContractId,{0})"
          }
        ]
      }
    }
  ],
  "Items": [
    {
      "GridPanel": {
        "Items": [
          {
            "Cell": {
              "ColumnSpan": 12,
              "Items": [
                {
                  "Label": {
                    "Text": "Мониторинг статусов обработки квитанций",
                    "Style": "gkh-listview-title",
                    "HorizontalAlignment": "Center",
                    "TextHorizontalAlignment": "Center",
                    "TextStyle": "Title"
                  }
                }
              ]
            }
          },
          {
            "Cell": {
              "ColumnSpan": 5,
              "Items": [
                {
                  "TextBox": {
                    "LabelText": "Улица",
                    "OnKeyDown": "FindOnPressEnter",
                    "Name": "StreetFilterTextBox",
                    "Value": {
                      "Source": "FilterDataSource",
                      "Property": "0.Value"
                    }
                  }
                }
              ]
            }
          },
          {
            "Cell": {
              "ColumnSpan": 2,
              "Items": [
                {
                  "DatePicker": {
                    "LabelText": "Период оплаты",
                    "Name": "PaymentPeriodFilterDatePicker",
                    "OnKeyDown": "FindDatePickerOnPressEnter",
                    "OnValueChanged": "{ SetTimelessDateFilterValues(context.dataSources.FilterDataSource, args.newValue, 2);}"
                  }
                }
              ]
            }
          },
          {
            "Cell": {
              "ColumnSpan": 2,
              "Items": [
                {
                  "DatePicker": {
                    "LabelText": "Период печати с ",
                    "Name": "BeginDateFilterDatePicker",
                    "OnKeyDown": "FindDatePickerOnPressEnter",
                    "OnValueChanged": "{ SetTimelessDateFilterValues(context.dataSources.FilterDataSource, args.newValue, 2);}"
                  }
                }
              ]
            }
          },
          {
            "Cell": {
              "ColumnSpan": 2,
              "Items": [
                {
                  "DatePicker": {
                    "LabelText": "по",
                    "Name": "EndDateFilterDatePicker",
                    "OnKeyDown": "FindDatePickerOnPressEnter",
                    "OnValueChanged": "{ SetTimelessDateFilterValues(context.dataSources.FilterDataSource, args.newValue, 2);}"
                  }
                }
              ]
            }
          },
          {
            "Cell": {
              "ColumnSpan": 1,
              "Items": [
                {
                  "Button": {
                    "Text": "Найти",
                    "Name": "FindButton",
                    "Style": "gkh-search-button",
                    "OnClick": "{ gkhSetFilter(context, 'FilterDataSource', 'ReceiptTrackingDataSource'); }"
                  }
                }
              ]
            }
          },
          {
            "Cell": {
              "ColumnSpan": 8,
              "Items": [
                {
                  "Panel": {
                    "Name": "FilterPanel",
                    "CollapsibleArea": "forCollapsible",
                    "HeaderTemplate": {
                      "GridPanel": {
                        "Items": [
                          {
                            "Cell": {
                              "ColumnSpan": 1,
                              "Items": [
                                {
                                  "Icon": {
                                    "Name": "forCollapsible",
                                    "Value": "chevron-down"
                                  }
                                }
                              ]
                            }
                          },
                          {
                            "Cell": {
                              "ColumnSpan": 4,
                              "Style": "gkh-font-size14",
                              "Items": [
                                {
                                  "StackPanel": {
                                    "Orientation": "Horizontal",
                                    "ViewMode": "FormGroup",
                                    "Items": [
                                      {
                                        "CheckBox": {
                                          "Text": "В обработке - "
                                        }
                                      },
                                      {
                                        "Icon": {
                                          "Value": "check-circle-o"
                                        }
                                      }
                                    ]
                                  }
                                }
                              ]
                            }
                          },
                          {
                            "Cell": {
                              "ColumnSpan": 3,
                              "Style": "gkh-font-size14",
                              "Items": [
                                {
                                  "StackPanel": {
                                    "Orientation": "Horizontal",
                                    "ViewMode": "FormGroup",
                                    "Items": [
                                      {
                                        "CheckBox": {
                                          "Text": "Ошибки - "
                                        }
                                      },
                                      {
                                        "Icon": {
                                          "Value": "check-circle-o",
                                          "Foreground": "accent-danger"
                                        }
                                      }
                                    ]
                                  }
                                }
                              ]
                            }
                          },
                          {
                            "Cell": {
                              "ColumnSpan": 4,
                              "Style": "gkh-font-size14",
                              "Items": [
                                {
                                  "StackPanel": {
                                    "Orientation": "Horizontal",
                                    "ViewMode": "FormGroup",
                                    "Items": [
                                      {
                                        "CheckBox": {
                                          "Text": "Загружено в \"Управдом\" - "
                                        }
                                      },
                                      {
                                        "Icon": {
                                          "Value": "check-circle-o",
                                          "Foreground": "accent-success"
                                        }
                                      },
                                      {
                                        "Icon": {
                                          "Value": "check-circle-o",
                                          "Foreground": "accent-success"
                                        }
                                      },
                                      {
                                        "Icon": {
                                          "Value": "check-circle-o",
                                          "Foreground": "accent-success"
                                        }
                                      },
                                      {
                                        "Icon": {
                                          "Value": "check-circle-o",
                                          "Foreground": "accent-success"
                                        }
                                      }
                                    ]
                                  }
                                }
                              ]
                            }
                          }
                        ]
                      }
                    },
                    "Collapsible": true,
                    "Collapsed": true,
                    "Items": [
                      {
                        "GridPanel": {
                          "Items": [
                            {
                              "Cell": {
                                "ColumnSpan": 4,
                                "Items": [
                                  {
                                    "StackPanel": {
                                      "Items": [
                                        {
                                          "GridPanel": {
                                            "Items": [
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 7,
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "CheckBox": {
                                                              "Text": "В очереди на обработку"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 5,
                                                  "Style": "gkh-margin-top-10",
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "Background4"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "Background4"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "Background4"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        {
                                          "GridPanel": {
                                            "VerticalAlignment": "Bottom",
                                            "Items": [
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 7,
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "CheckBox": {
                                                              "Text": "Обработка"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 5,
                                                  "Style": "gkh-margin-top-10",
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "accent-success"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "Background4"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "Background4"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        {
                                          "GridPanel": {
                                            "VerticalAlignment": "Bottom",
                                            "Items": [
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 7,
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "CheckBox": {
                                                              "Text": "В очереди на загрузку"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 5,
                                                  "Style": "gkh-margin-top-10",
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "accent-success"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "accent-success"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "Background4"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        {
                                          "GridPanel": {
                                            "VerticalAlignment": "Bottom",
                                            "Items": [
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 7,
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "CheckBox": {
                                                              "Text": "Загрузка в \"Управдом\""
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 5,
                                                  "Style": "gkh-margin-top-10",
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "accent-success"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "accent-success"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "accent-success"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      ]
                                    }
                                  }
                                ]
                              }
                            },
                            {
                              "Cell": {
                                "ColumnSpan": 4,
                                "Items": [
                                  {
                                    "StackPanel": {
                                      "Items": [
                                        {
                                          "GridPanel": {
                                            "Items": [
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 7,
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "CheckBox": {
                                                              "Text": "Не пройден ФЛК"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 5,
                                                  "Style": "gkh-margin-top-10",
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "accent-danger"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "Background4"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "Background4"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "Background4"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        {
                                          "GridPanel": {
                                            "Items": [
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 7,
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "CheckBox": {
                                                              "Text": "Ошибка обработки"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 5,
                                                  "Style": "gkh-margin-top-10",
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "accent-success"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "accent-danger"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "Background4"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "Background4"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            ]
                                          }
                                        },
                                        {
                                          "GridPanel": {
                                            "Items": [
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 7,
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "CheckBox": {
                                                              "Text": "Ошибка загрузки в \"Управдом\""
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              },
                                              {
                                                "Cell": {
                                                  "ColumnSpan": 5,
                                                  "Style": "gkh-margin-top-10",
                                                  "Items": [
                                                    {
                                                      "StackPanel": {
                                                        "Orientation": "Horizontal",
                                                        "ViewMode": "FormGroup",
                                                        "Items": [
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "accent-success"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "accent-success"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "accent-success"
                                                            }
                                                          },
                                                          {
                                                            "Icon": {
                                                              "Value": "check-circle-o",
                                                              "Foreground": "accent-danger"
                                                            }
                                                          }
                                                        ]
                                                      }
                                                    }
                                                  ]
                                                }
                                              }
                                            ]
                                          }
                                        }
                                      ]
                                    }
                                  }
                                ]
                              }
                            },
                            {
                              "Cell": {
                                "ColumnSpan": 4,
                                "Items": [
                                  {
                                    "StackPanel": {
                                      "Cell": {
                                        "ColumnSpan": 12,
                                        "Items": []
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "Cell": {
              "ColumnSpan": 4,
              "Items": []
            }
          },
          {
            "Cell": {
              "ColumnSpan": 3,
              "Items": [
                {
                  "CheckBox": {
                    "Name": "SelectAllCheckBox",
                    "Text": "Выбрать все",
                    "Style": "gkh-datagrid-checkbox",
                    "OnValueChanged": "{ }"
                  }
                }
              ]
            }
          },
          {
            "Cell": {
              "ColumnSpan": 12,
              "OnDoubleClick": "{ GetHouseProfile988ResponseListViewOnDoubleClickEdit(context, args); }",
              "Items": [
                {
                  "ScrollPanel": {
                    "Items": [
                      {
                        "DataGrid": {
                          "Name": "ReceiptDataGrid",
                          "VerticalAlignment": "Stretch",
                          "MultiSelect": true,
                          "ValueSelector": "{ return args.value._id; }",
                          "Columns": [
                            {
                              "Header": "Id сессии",
                              "CellProperty": "DisplayAddress",
                              "Width": "200px"
                            },
                            {
                              "Header": "Наименование организации",
                              "CellProperty": "house_profile_data.area_total",
                              "Width": "250px"
                            },
                            {
                              "Header": "ИНН",
                              "CellFormat": "{house_profile_data.management_contract.date_start:d}",
                              "Width": "100px"
                            },
                            {
                              "Header": "Лиц. счет",
                              "CellProperty": "CompanyShortName",
                              "Width": "100px"
                            },
                            {
                              "Header": "Адрес",
                              "CellProperty": "CompanyShortName",
                              "Width": "250px"
                            },
                            {
                              "Header": "Период оплаты",
                              "CellProperty": "CompanyShortName",
                              "Width": "150px"
                            },
                            {
                              "Header": "Дата печати",
                              "CellProperty": "CompanyShortName",
                              "Width": "150px"
                            },
                            {
                              "Header": "Статус обработки",
                              "CellProperty": "CompanyShortName",
                              "Width": "200px"
                            },
                            {
                              "Header": "Прогресс",
                              "CellProperty": "CompanyShortName",
                              "Width": "100px"
                            },
                            {
                              "Header": "Информация об ошибке",
                              "CellProperty": "CompanyShortName"
                            }
                          ],
                          "Items": {
                            "Source": "ReceiptTrackingDataSource",
                            "Property": ""
                          },
                          "OnValueChanged": "{ /*GetHouseProfile988ResponseListViewHousesDataGridOnValueChangedOnValueChanged(context, args)*/ }"
                        }
                      },
                      {
                        "Label": {
                          "Text": "Ничего не найдено",
                          "HorizontalAlignment": "Center",
                          "TextHorizontalAlignment": "Center",
                          "Visible": {
                            "Source": "ReceiptTrackingDataSource",
                            "Property": "",
                            "DefaultValue": false,
                            "Mode": "ToElement",
                            "Converter": {
                              "ToElement": "{ return IsArrayNullOrEmpty(args.value); }"
                            }
                          }
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "Cell": {
              "ColumnSpan": 3,
              "Items": [
                {
                  "GridPanel": {
                    "Items": [
                      {
                        "Cell": {
                          "ColumnSpan": 1,
                          "Items": [
                            {
                              "StackPanel": {
                                "Orientation": "Horizontal",
                                "ViewMode": "FormGroup",
                                "Items": [
                                  {
                                    "Button": {
                                      "ViewMode": "link",
                                      "Name": "RefreshDataButton",
                                      "Style": "ghk-font-size24",
                                      "ContentTemplate": {
                                        "Icon": {
                                          "Style": "gkh-margin-top-10",
                                          "Value": "refresh"
                                        }
                                      }
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      },
                      {
                        "Cell": {
                          "ColumnSpan": 11,
                          "Items": [
                            {
                              "StackPanel": {
                                "Orientation": "Horizontal",
                                "ViewMode": "FormGroup",
                                "Items": [
                                  {
                                    "CheckBox": {
                                      "Text": "Получать новые квитанции автоматически"
                                    }
                                  }
                                ]
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                }
              ]
            }
          },
          {
            "Cell": {
              "ColumnSpan": 9,
              "Items": [
                {
                  "DataNavigation": {
                    "AvailablePageSizes": [
                      20,
                      50,
                      100
                    ],
                    "DataSource": "ReceiptTrackingDataSource"
                  }
                }
              ]
            }
          }
        ]
      }
    }
  ],
  "Scripts": [
    {
      "Name": "FindOnPressEnter",
      "Body": "{ GetHouseProfile988ResponseListViewFindButtonOnClick(context, args) }"
    },
    {
      "Name": "FindTextBoxOnPressEnter",
      "Body": "{ GetHouseProfile988ResponseListViewFindTextBoxButtonOnClick(context, args) }"
    },
    {
      "Name": "FindDatePickerOnPressEnter",
      "Body": "{ GetHouseProfile988ResponseListViewFindDatePickerButtonOnClick(context, args) }"
    },
    {
      "Name": "FindComboBoxOnPressEnter",
      "Body": "{ GetHouseProfile988ResponseListViewFindComboBoxButtonOnClick(context, args) }"
    }
  ]
}
